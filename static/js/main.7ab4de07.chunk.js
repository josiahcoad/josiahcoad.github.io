(this["webpackJsonpgoogle-map-app"]=this["webpackJsonpgoogle-map-app"]||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(10),s=n.n(r),c=n(12),o=n(144),l=n(141),d=n(74),u=n(143),p=n(45),j=n.n(p),b=n(64),m=n(65),h=n.n(m),f=n(41),g=new Date,x=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][g.getDay()];var y=function(e){var t=e.getHours(),n=e.getMinutes(),a=t>=12?"P":"A";return(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n)+a}(g),O={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},v=function(e){var t=e.filter((function(e){return O[e.start_day]<=O[x]&&O[e.end_day]>=O[x]}));return t.length>0?t[0]:{}},w=function(e){return"now"===e?"now/".concat(x,"%20").concat(y):"today/".concat(x)},C=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("https://gbjt9fglc8.execute-api.us-west-2.amazonaws.com/api/places/".concat(w(t)));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),f.a.exception({description:"Error fetching data",fatal:!0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),_=n(130),T=n(131),S=n(132),E=n(25),P=n(129),k=n(8),I=Object(P.a)((function(e){return{title:Object(E.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(E.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(k.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(k.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(E.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),toolbar:{display:"flex",justifyContent:"space-between"}}})),N=n(3),A=function(){var e=I();return Object(N.jsx)(_.a,{position:"static",children:Object(N.jsx)(T.a,{className:e.toolbar,children:Object(N.jsx)(S.a,{variant:"h5",className:e.title,children:"Don't Worry, Be Happy Now!"})})})},F=n(139),R=n(135),B=n(145),D=n(147),L=n(140),z=n(133),G=n(134),W=n(137),H=n(114),K=n(138),M=n(149),U=n(146),V=n(5),J=n(136),Y=n(71),Z=n.n(Y),Q=Object(P.a)((function(e){return{expand:{transform:"rotate(0deg)",marginRight:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},root:{display:"flex"},details:{display:"flex",flexDirection:"column",flex:"1"},content:{flex:"1 0 auto"},image:{display:"flex",flexDirection:"column",alignItems:"center",flex:"1",margin:"10px",borderRadius:"5px",maxHeight:"150px",maxWidth:"150px"},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)}}})),X=function(e){var t=e.photos&&e.photos[0];return t?"https://maps.googleapis.com/maps/api/place/photo?photo_reference=".concat(t,"&key=AIzaSyCxfXAPgVM8ownCZdr8dFbQSg76chB7P4s&maxheight=350"):"https://www.foodserviceandhospitality.com/wp-content/uploads/2016/09/Restaurant-Placeholder-001.jpg"},$=function(e,t){return"now"===t?"Until "+e.end_time:e.start_time+" - "+e.end_time},q=function(e,t){return"$"===t?t+e:e+t},ee=function(e,t){return t.length>e?t.substring(0,e)+"...":t},te=function(e){var t,n=e.place,a=e.selected,r=e.refProp,s=e.timeFilter;a&&(null===r||void 0===r||null===(t=r.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start"}));var o=Q(),l=i.a.useState(!1),d=Object(c.a)(l,2),u=d[0],p=d[1];return Object(N.jsxs)(z.a,{elevation:6,className:o.root,children:[Object(N.jsxs)("div",{className:o.details,children:[Object(N.jsxs)(G.a,{className:o.content,children:[Object(N.jsx)(S.a,{gutterBottom:!0,variant:"h5",children:n.place_name}),Object(N.jsxs)(B.a,{display:"flex",my:0,children:[Object(N.jsx)(B.a,{display:"flex",mr:1,children:Object(N.jsx)(M.a,{value:Number(n.rating),readOnly:!0})}),Object(N.jsxs)(S.a,{children:["(",n.user_ratings_total,")"]})]}),Object(N.jsx)(B.a,{display:"flex",justifyContent:"space-between",my:1,alignItems:"center",children:Object(N.jsx)(S.a,{variant:"subtitle2",color:"textSecondary",children:$(v(n.times),s)})}),Object(N.jsx)("hr",{}),n.deals.slice(0,5).map((function(e){return Object(N.jsx)(B.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:Object(N.jsxs)(S.a,{variant:"subtitle2",color:"textSecondary",children:[q(e.discount_amount,e.discount_marker),": ",ee(35,e.item)]})})})),n.deals.length>5&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(R.a,{disableSpacing:!0,children:[Object(N.jsxs)(S.a,{variant:"subtitle2",color:"textSecondary",children:["+ ",n.deals.length-5," more!"]}),Object(N.jsx)(J.a,{className:Object(V.a)(o.expand,Object(E.a)({},o.expandOpen,u)),onClick:function(){p(!u)},"aria-expanded":u,"aria-label":"show more",children:Object(N.jsx)(Z.a,{})})]}),Object(N.jsx)(U.a,{in:u,timeout:"auto",unmountOnExit:!0,children:n.deals.slice(5).map((function(e){return Object(N.jsx)(B.a,{display:"flex",justifyContent:"space-between",my:1,alignItems:"center",children:Object(N.jsxs)(S.a,{variant:"subtitle2",color:"textSecondary",children:[q(e.discount_amount,e.discount_marker),": ",ee(35,e.item)]})})}))})]})]}),Object(N.jsx)(R.a,{children:Object(N.jsx)(W.a,{variant:"outlined",children:n.formatted_address&&Object(N.jsx)(H.a,{size:"small",color:"seconday",onClick:function(){return window.open(n.gmap_url,"_blank")},children:"Google Maps"})})})]}),Object(N.jsx)(K.a,{className:o.image,image:X(n)})]})},ne=Object(P.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,marginBottom:"30px"},selectEmpty:{marginTop:e.spacing(2)},loading:{height:"600px",display:"flex",justifyContent:"center",alignItems:"center"},container:{padding:"25px"},marginBottom:{marginBottom:"30px"},list:{height:"75vh",overflow:"auto"}}})),ae=function(e){var t=e.places,n=e.timeFilter,i=e.setTimeFilter,r=e.childClicked,s=e.isLoading,o=e.coords,d=Object(a.useState)([]),u=Object(c.a)(d,2),p=u[0],j=u[1],b=ne();return Object(a.useEffect)((function(){j((function(e){return Array(t.length).fill().map((function(t,n){return e[n]||Object(a.createRef)()}))}))}),[t]),Object(N.jsx)("div",{className:b.container,children:s?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(S.a,{variant:"h4",children:"Loading Happiness \ud83d\ude00"}),Object(N.jsx)("div",{className:b.loading,children:Object(N.jsx)(F.a,{size:"5rem"})})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(S.a,{variant:"h4",children:["Found ",t.length," happening ","now"===n?"now":"today"," ",0===t.length&&":("]}),Object(N.jsxs)(R.a,{style:{justifyContent:"center"},children:[Object(N.jsxs)(D.a,{value:n,exclusive:!0,onChange:function(e,t){i(t)},children:[Object(N.jsx)(L.a,{value:"now",children:"Now"}),Object(N.jsx)(L.a,{value:"today",children:"Today"})]}),Object(N.jsx)(B.a,{sx:{m:.5}})]}),Object(N.jsx)("br",{}),Object(N.jsx)(l.a,{container:!0,spacing:3,className:b.list,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(N.jsx)(l.a,{ref:p[t],item:!0,xs:12,children:Object(N.jsx)(te,{selected:Number(r)===t,refProp:p[t],place:e,coords:o,timeFilter:n})},t)}))})]})})},ie=n(75),re=n(142),se=n(77),ce=n(73),oe=n.n(ce),le=[{featureType:"all",elementType:"all",stylers:[{saturation:"32"},{lightness:"-3"},{visibility:"on"},{weight:"1.18"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{saturation:"-70"},{lightness:"14"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{saturation:"100"},{lightness:"-14"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"},{lightness:"12"}]}],de=Object(P.a)((function(){return{paper:{padding:"10px",display:"flex",flexDirection:"column",justifyContent:"center",width:"100px"},mapContainer:{height:"85vh",width:"100%"},markerContainer:{position:"absolute",transform:"translate(-50%, -50%)",zIndex:1,"&:hover":{zIndex:2}},pointer:{cursor:"pointer"}}})),ue=function(e){var t=e.coords,n=e.places,a=e.setCoords,i=e.setBounds,r=e.setChildClicked,s=Object(re.a)("(min-width:600px)"),c=de();return Object(N.jsx)("div",{className:c.mapContainer,children:Object(N.jsx)(ie.a,{bootstrapURLKeys:{key:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyCxfXAPgVM8ownCZdr8dFbQSg76chB7P4s",REACT_APP_RAPID_API_TRAVEL_API_KEY:"i9fZeDjHQ9mshwxyGc2nw99PboG1p14gXUSjsnfrglvSGlT5Jh"}).REACT_APP_GOOGLE_MAP_API_KEY},defaultCenter:t,center:t,defaultZoom:14,margin:[50,50,50,50],options:{disableDefaultUI:!1,zoomControl:!0,styles:le},onChange:function(e){a({lat:e.center.lat,lng:e.center.lng}),i({ne:e.marginBounds.ne,sw:e.marginBounds.sw})},onChildClick:function(e){return r(e)},children:n.map((function(e,t){return Object(N.jsx)("div",{className:c.markerContainer,lat:Number(e.lat),lng:Number(e.lng),children:s?Object(N.jsxs)(se.a,{elevation:3,className:c.paper,children:[Object(N.jsxs)(S.a,{className:c.typography,variant:"subtitle2",gutterBottom:!0,children:[" ",e.name]}),Object(N.jsx)(S.a,{variant:"subtitle3",color:"textSecondary",children:e.deals.slice(0,3).map((function(e){return t=e.discount_amount,("$"===(n=e.discount_marker)?n+t:t+n)+": "+e.item;var t,n})).join(", ")+"..."})]}):Object(N.jsx)(oe.a,{color:"primary",fontSize:"large"})},t)}))})})};f.a.initialize("G-0JVNW6YKDD");var pe=Object(d.a)({palette:{primary:{main:"#EFC319"},secondary:{main:"#bb94e3"}}}),je=function(){var e=Object(a.useState)({}),t=Object(c.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(null),s=Object(c.a)(r,2),d=(s[0],s[1]),p=Object(a.useState)([]),j=Object(c.a)(p,2),b=j[0],m=j[1],h=Object(a.useState)([]),f=Object(c.a)(h,2),g=f[0],x=f[1],y=Object(a.useState)(null),O=Object(c.a)(y,2),v=O[0],w=O[1],_=Object(a.useState)(!1),T=Object(c.a)(_,2),S=T[0],E=T[1],P=Object(a.useState)("now"),k=Object(c.a)(P,2),I=k[0],F=k[1];return Object(a.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,n=t.latitude,a=t.longitude;i({lat:n,lng:a})}))}),[]),Object(a.useEffect)((function(){m(g)}),[I,g]),Object(a.useEffect)((function(){E(!0),C(I).then((function(e){e=e.filter((function(e){return e.deals.length>0})),x(e),m(e),E(!1)}))}),[I]),Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(u.a,{theme:pe,children:[Object(N.jsx)(o.a,{}),Object(N.jsx)(A,{}),Object(N.jsxs)(l.a,{container:!0,spacing:3,style:{width:"100%"},children:[Object(N.jsx)(l.a,{item:!0,xs:12,md:4,children:Object(N.jsx)(ae,{isLoading:S,childClicked:v,places:b,timeFilter:I,setTimeFilter:F,coords:n})}),Object(N.jsx)(l.a,{item:!0,xs:12,md:8,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(N.jsx)(ue,{setChildClicked:w,setBounds:d,setCoords:i,coords:n,places:b.length?b:g})})]})]})})};s.a.render(Object(N.jsx)(je,{}),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.7ab4de07.chunk.js.map