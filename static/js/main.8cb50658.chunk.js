(this["webpackJsonpgoogle-map-app"]=this["webpackJsonpgoogle-map-app"]||[]).push([[0],{117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),s=a.n(i),c=a(11),o=a(149),l=a(146),d=a(77),u=a(148),p=a(51),j=a.n(p),m=a(66),b=a(67),h=a.n(b),f=function(){var e=Object(m.a)(j.a.mark((function e(){var t,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("https://gbjt9fglc8.execute-api.us-west-2.amazonaws.com/api/todos");case 3:return t=e.sent,a=t.data,n=a.map((function(e){return e.data})),e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();function g(e){e=e.toLowerCase();var t=Number(e.match(/^(\d+)/)[1]),a=e.match(/(am|pm)$/),n=a?a[1]:"pm",r=e.match(/:(\d+)/),i=r?Number(r[1]):0;e.includes(":")||(i=0),"pm"===n.toLowerCase()&&t<12&&(t+=12),"am"===n.toLowerCase()&&12===t&&(t-=12);var s=t.toString(),c=i.toString();return t<10&&(s="0"+s),i<10&&(c="0"+c),s+":"+c}function y(e){return 3600*Number(e.match(/^(\d+)/)[1])+60*Number(e.match(/:(\d+)/)[1])}var O=function(e){return"number"==typeof e||"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))},x=a(135),v=a(136),w=a(120),C=a(24),_=a(134),S=a(8),N=Object(_.a)((function(e){return{title:Object(C.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(C.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(S.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(S.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(C.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),toolbar:{display:"flex",justifyContent:"space-between"}}})),T=a(2),k=function(){var e=N();return Object(T.jsx)(x.a,{position:"static",children:Object(T.jsx)(v.a,{className:e.toolbar,children:Object(T.jsx)(w.a,{variant:"h5",className:e.title,children:"From one Austinite to another!"})})})},P=a(143),E=a(153),A=a(144),I=a(145),F=a(151),D=a(137),B=a(138),R=a(139),L=a(150),z=a(140),H=a(154),W=a(142),G=a(73),K=a.n(G),U=a(74),M=a.n(U),V=a(156),$=a(152),Z=a(4),J=a(141),Q=a(52),X=a.n(Q),Y=Object(_.a)((function(e){return{chip:{margin:"5px 5px 5px 0"},subtitle:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},spacing:{display:"flex",alignItems:"center",justifyContent:"space-between"},expand:{transform:"rotate(0deg)",marginRight:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})),q=["sunday","monday","tuesday","wednesday","thursday","friday","saturday","sunday"][(new Date).getDay()],ee=function(e){return e.filter((function(e){return e.day===q}))[0]},te=function(e){var t=e.times;return ee(t)?"".concat(ee(t).start_time,"-").concat(ee(t).end_time):"Not Happyning Today :("},ae=function(e){var t=e.gmap.photos&&e.gmap.photos[0].photo_reference;return t?"https://maps.googleapis.com/maps/api/place/photo?photo_reference=".concat(t,"&key=AIzaSyCxfXAPgVM8ownCZdr8dFbQSg76chB7P4s&maxheight=350"):"https://www.foodserviceandhospitality.com/wp-content/uploads/2016/09/Restaurant-Placeholder-001.jpg"},ne=function(e){var t,a=e.place,n=e.selected,i=e.refProp,s=e.coords;n&&(null===i||void 0===i||null===(t=i.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start"}));var o=Y(),l=r.a.useState(!1),d=Object(c.a)(l,2),u=d[0],p=d[1],j=function(){p(!u)};return Object(T.jsxs)(D.a,{elevation:6,children:[Object(T.jsx)(B.a,{style:{height:350},image:ae(a),title:a.name}),Object(T.jsxs)(R.a,{children:[Object(T.jsx)(w.a,{gutterBottom:!0,variant:"h5",children:a.name}),Object(T.jsxs)(L.a,{display:"flex",justifyContent:"space-between",my:2,children:[Object(T.jsx)(V.a,{name:"read-only",value:Number(a.gmap.rating),readOnly:!0}),Object(T.jsxs)(w.a,{component:"legend",children:[a.gmap.user_ratings_total," review",a.gmap.user_ratings_total>1&&"s"]})]}),Object(T.jsx)(w.a,{component:"legend",children:te(a)}),Object(T.jsxs)(z.a,{disableSpacing:!0,children:[Object(T.jsx)(w.a,{variant:"subtitle2",color:"textSecondary",children:"See all times"}),Object(T.jsx)(J.a,{className:Object(Z.a)(o.expand,Object(C.a)({},o.expandOpen,u)),onClick:j,"aria-expanded":u,"aria-label":"show more",children:Object(T.jsx)(X.a,{})})]}),Object(T.jsx)($.a,{in:u,timeout:"auto",unmountOnExit:!0,children:a.times.map((function(e){return Object(T.jsx)(L.a,{display:"flex",justifyContent:"space-between",my:1,alignItems:"center",children:Object(T.jsxs)(w.a,{variant:"subtitle2",color:"textSecondary",children:[(t=e.day,t.charAt(0).toUpperCase()+t.slice(1)),": ",e.start_time,"-",e.end_time]})});var t}))}),Object(T.jsx)(L.a,{display:"flex",justifyContent:"space-between",children:void 0!==a.gmap.price_level&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(w.a,{component:"legend",children:"Price"}),Object(T.jsx)(w.a,{gutterBottom:!0,variant:"subtitle1",children:"$".repeat(a.gmap.price_level+1)})]})}),a.deals.slice(0,5).map((function(e){return Object(T.jsx)(L.a,{display:"flex",justifyContent:"space-between",my:1,alignItems:"center",children:Object(T.jsxs)(w.a,{variant:"subtitle2",color:"textSecondary",children:[O(e.price)&&"$",e.price," ",e.item]})})})),a.deals.length>5&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(z.a,{disableSpacing:!0,children:[Object(T.jsxs)(w.a,{variant:"subtitle2",color:"textSecondary",children:["+ ",a.deals.length-5," more!"]}),Object(T.jsx)(J.a,{className:Object(Z.a)(o.expand,Object(C.a)({},o.expandOpen,u)),onClick:j,"aria-expanded":u,"aria-label":"show more",children:Object(T.jsx)(X.a,{})})]}),Object(T.jsx)($.a,{in:u,timeout:"auto",unmountOnExit:!0,children:a.deals.slice(5).map((function(e){return Object(T.jsx)(L.a,{display:"flex",justifyContent:"space-between",my:1,alignItems:"center",children:Object(T.jsxs)(w.a,{variant:"subtitle2",color:"textSecondary",children:[O(e.price)&&"$",e.price,", ",e.item]})})}))})]}),a.dogfriendly&&Object(T.jsx)(H.a,{size:"small",label:"Public Wifi",className:o.chip}),a.wifi&&Object(T.jsx)(H.a,{size:"small",label:"Dog Friendly",className:o.chip}),a.gmap.formatted_address&&Object(T.jsxs)(w.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",className:o.subtitle,children:[Object(T.jsx)(K.a,{}),Object(T.jsx)(W.a,{size:"small",color:"seconday",onClick:function(){return window.open(function(e,t){return"https://www.google.com/maps/dir/".concat(t.lat,",").concat(t.lng,"/").concat(e)}(a.gmap.formatted_address,s),"_blank")},children:a.gmap.formatted_address})]}),a.gmap.formatted_phone&&Object(T.jsxs)(w.a,{variant:"body2",color:"textSecondary",className:o.spacing,children:[Object(T.jsx)(M.a,{})," ",a.gmap.formatted_phone]})]}),Object(T.jsx)(z.a,{children:Object(T.jsx)(W.a,{size:"small",color:"seconday",onClick:function(){return window.open(a.gmap.website,"_blank")},children:"Website"})})]})},re=Object(_.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,marginBottom:"30px"},selectEmpty:{marginTop:e.spacing(2)},loading:{height:"600px",display:"flex",justifyContent:"center",alignItems:"center"},container:{padding:"25px"},marginBottom:{marginBottom:"30px"},list:{height:"75vh",overflow:"auto"}}})),ie=function(e){var t=e.places,a=e.dogFriendly,r=e.setDogFriendly,i=e.wifi,s=e.setWifi,o=e.happyNow,d=e.setHappyNow,u=e.childClicked,p=e.isLoading,j=e.coords,m=Object(n.useState)([]),b=Object(c.a)(m,2),h=b[0],f=b[1],g=re();return Object(n.useEffect)((function(){f((function(e){return Array(t.length).fill().map((function(t,a){return e[a]||Object(n.createRef)()}))}))}),[t]),Object(T.jsx)("div",{className:g.container,children:p?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(w.a,{variant:"h4",children:"Loading Happiness \ud83d\ude00"}),Object(T.jsx)("div",{className:g.loading,children:Object(T.jsx)(P.a,{size:"5rem"})})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(w.a,{variant:"h4",children:["Found ",t.length," deals nearby"]}),Object(T.jsx)(E.a,{className:g.formControl,children:Object(T.jsxs)(A.a,{row:!0,children:[Object(T.jsx)(I.a,{control:Object(T.jsx)(F.a,{checked:a,onChange:function(e){return r(e.target.checked)},name:"dogFriendly",color:"primary"}),label:"Dog Friendly"}),Object(T.jsx)(I.a,{control:Object(T.jsx)(F.a,{checked:i,onChange:function(e){return s(e.target.checked)},name:"wifi",color:"primary"}),label:"Public Wifi"}),Object(T.jsx)(I.a,{control:Object(T.jsx)(F.a,{checked:o,onChange:function(e){return d(e.target.checked)},name:"happyNow",color:"primary"}),label:"Happyning Now"})]})}),Object(T.jsx)(l.a,{container:!0,spacing:3,className:g.list,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(T.jsx)(l.a,{ref:h[t],item:!0,xs:12,children:Object(T.jsx)(ne,{selected:Number(u)===t,refProp:h[t],place:e,coords:j})},t)}))})]})})},se=a(78),ce=a(147),oe=a(80),le=a(76),de=a.n(le),ue=[{featureType:"all",elementType:"all",stylers:[{saturation:"32"},{lightness:"-3"},{visibility:"on"},{weight:"1.18"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{saturation:"-70"},{lightness:"14"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{saturation:"100"},{lightness:"-14"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"},{lightness:"12"}]}],pe=Object(_.a)((function(){return{paper:{padding:"10px",display:"flex",flexDirection:"column",justifyContent:"center",width:"100px"},mapContainer:{height:"85vh",width:"100%"},markerContainer:{position:"absolute",transform:"translate(-50%, -50%)",zIndex:1,"&:hover":{zIndex:2}},pointer:{cursor:"pointer"}}})),je=["sunday","monday","tuesday","wednesday","thursday","friday","saturday","sunday"][(new Date).getDay()],me=function(e){return e.filter((function(e){return e.day===je}))[0]},be=function(e){var t=e.times;return me(t)?"".concat(me(t).start_time,"-").concat(me(t).end_time):"Not Today :("},he=function(e){var t=e.coords,a=e.places,n=e.setCoords,r=e.setBounds,i=e.setChildClicked,s=Object(ce.a)("(min-width:600px)"),c=pe();return Object(T.jsx)("div",{className:c.mapContainer,children:Object(T.jsx)(se.a,{bootstrapURLKeys:{key:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyCxfXAPgVM8ownCZdr8dFbQSg76chB7P4s",REACT_APP_RAPID_API_TRAVEL_API_KEY:"i9fZeDjHQ9mshwxyGc2nw99PboG1p14gXUSjsnfrglvSGlT5Jh"}).REACT_APP_GOOGLE_MAP_API_KEY},defaultCenter:t,center:t,defaultZoom:14,margin:[50,50,50,50],options:{disableDefaultUI:!1,zoomControl:!0,styles:ue},onChange:function(e){n({lat:e.center.lat,lng:e.center.lng}),r({ne:e.marginBounds.ne,sw:e.marginBounds.sw})},onChildClick:function(e){return i(e)},children:a.length&&a.map((function(e,t){return Object(T.jsx)("div",{className:c.markerContainer,lat:Number(e.gmap.geometry.location.lat),lng:Number(e.gmap.geometry.location.lng),children:s?Object(T.jsxs)(oe.a,{elevation:3,className:c.paper,children:[Object(T.jsxs)(w.a,{className:c.typography,variant:"subtitle2",gutterBottom:!0,children:[" ",e.name]}),Object(T.jsx)(w.a,{className:c.typography,variant:"subtitle3",gutterBottom:!0,children:be(e)}),Object(T.jsx)(w.a,{variant:"subtitle3",color:"textSecondary",children:e.deals.slice(0,3).map((function(e){return(O(e.price)?"$":"")+e.price+" "+e.item})).join(", ")+"..."})]}):Object(T.jsx)(de.a,{color:"primary",fontSize:"large"})},t)}))})})},fe=Object(d.a)({palette:{primary:{main:"#EFC319"},secondary:{main:"#bb94e3"}}}),ge=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),s=Object(c.a)(i,2),d=s[0],p=s[1],j=Object(n.useState)(!1),m=Object(c.a)(j,2),b=m[0],h=m[1],O=Object(n.useState)({}),x=Object(c.a)(O,2),v=x[0],w=x[1],C=Object(n.useState)(null),_=Object(c.a)(C,2),S=(_[0],_[1]),N=Object(n.useState)([]),P=Object(c.a)(N,2),E=P[0],A=P[1],I=Object(n.useState)([]),F=Object(c.a)(I,2),D=F[0],B=F[1],R=Object(n.useState)(null),L=Object(c.a)(R,2),z=L[0],H=L[1],W=Object(n.useState)(!1),G=Object(c.a)(W,2),K=G[0],U=G[1];return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;w({lat:a,lng:n})}))}),[]),Object(n.useEffect)((function(){var e=D.filter((function(e){return!a||e.dogfriendly})).filter((function(e){return!d||Boolean(e.wifi)})).filter((function(e){return!b||function(e){var t=new Date,a=["sunday","monday","tuesday","wednesday","thurday","friday","saturday","sunday"][t.getDay()],n=t.getHours(),r=t.getMinutes(),i=e.times.filter((function(e){return e.day===a}));if(!i||0===i.length)return!1;var s=y(g(i[0].start_time)),c=y(g(i[0].end_time)),o=y("".concat(n,":").concat(r));return o>s&&o<c}(e)}));A(e)}),[a,d,b,D]),Object(n.useEffect)((function(){U(!0),f().then((function(e){e=e.filter((function(e){return e.deals.length>0})),B(e),A(e),r(!1),p(!1),h(!1),U(!1)}))}),[]),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(u.a,{theme:fe,children:[Object(T.jsx)(o.a,{}),Object(T.jsx)(k,{}),Object(T.jsxs)(l.a,{container:!0,spacing:3,style:{width:"100%"},children:[Object(T.jsx)(l.a,{item:!0,xs:12,md:4,children:Object(T.jsx)(ie,{isLoading:K,childClicked:z,places:E,wifi:d,setWifi:p,dogFriendly:a,setDogFriendly:r,happyNow:b,setHappyNow:h,coords:v})}),Object(T.jsx)(l.a,{item:!0,xs:12,md:8,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(T.jsx)(he,{setChildClicked:H,setBounds:S,setCoords:w,coords:v,places:E.length?E:D})})]})]})})};s.a.render(Object(T.jsx)(ge,{}),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.8cb50658.chunk.js.map