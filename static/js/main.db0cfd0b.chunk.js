(this["webpackJsonpgoogle-map-app"]=this["webpackJsonpgoogle-map-app"]||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),c=a.n(i),s=a(11),o=a(150),l=a(147),d=a(78),u=a(149),p=a(52),j=a.n(p),m=a(67),b=a(68),h=a.n(b),f=a(26),g=function(){var e=Object(m.a)(j.a.mark((function e(){var t,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("https://gbjt9fglc8.execute-api.us-west-2.amazonaws.com/api/todos");case 3:return t=e.sent,a=t.data,n=a.map((function(e){return e.data})),e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),f.a.exception({description:"Error fetching data",fatal:!0}),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();function y(e){e=e.toLowerCase();var t=Number(e.match(/^(\d+)/)[1]),a=e.match(/(am|pm)$/),n=a?a[1]:"pm",r=e.match(/:(\d+)/),i=r?Number(r[1]):0;e.includes(":")||(i=0),"pm"===n.toLowerCase()&&t<12&&(t+=12),"am"===n.toLowerCase()&&12===t&&(t-=12);var c=t.toString(),s=i.toString();return t<10&&(c="0"+c),i<10&&(s="0"+s),c+":"+s}function O(e){return 3600*Number(e.match(/^(\d+)/)[1])+60*Number(e.match(/:(\d+)/)[1])}var x=function(e){return"number"==typeof e||"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))},v=a(136),w=a(137),C=a(121),_=a(138),N=a(24),S=a(135),k=a(8),T=Object(S.a)((function(e){return{title:Object(N.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(N.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(k.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(k.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(N.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),toolbar:{display:"flex",justifyContent:"space-between"}}})),P=a(2),E=function(){var e=T();return Object(P.jsx)(v.a,{position:"static",children:Object(P.jsxs)(w.a,{className:e.toolbar,children:[Object(P.jsx)(C.a,{variant:"h5",className:e.title,children:"From one Austinite to another!"}),Object(P.jsx)(_.a,{variant:"contained",color:"secondary",onClick:function(){return window.open("https://www.buymeacoffee.com/josiahcoad","_blank")},children:"Buy me a drink \ud83c\udf7a"})]})})},A=a(144),I=a(154),F=a(145),D=a(146),B=a(152),R=a(139),L=a(140),z=a(141),H=a(151),W=a(142),G=a(156),K=a(74),U=a.n(K),V=a(75),M=a.n(V),$=a(157),J=a(153),Y=a(4),Z=a(143),Q=a(53),X=a.n(Q),q=Object(S.a)((function(e){return{chip:{margin:"5px 5px 5px 0"},subtitle:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},spacing:{display:"flex",alignItems:"center",justifyContent:"space-between"},expand:{transform:"rotate(0deg)",marginRight:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})),ee=["sunday","monday","tuesday","wednesday","thursday","friday","saturday","sunday"][(new Date).getDay()],te=function(e){return e.filter((function(e){return e.day===ee}))[0]},ae=function(e){var t=e.times;return te(t)?"".concat(te(t).start_time,"-").concat(te(t).end_time):"Not Happyning Today :("},ne=function(e){var t=e.gmap.photos&&e.gmap.photos[0].photo_reference;return t?"https://maps.googleapis.com/maps/api/place/photo?photo_reference=".concat(t,"&key=AIzaSyCxfXAPgVM8ownCZdr8dFbQSg76chB7P4s&maxheight=350"):"https://www.foodserviceandhospitality.com/wp-content/uploads/2016/09/Restaurant-Placeholder-001.jpg"},re=function(e){var t,a=e.place,n=e.selected,i=e.refProp,c=e.coords;n&&(null===i||void 0===i||null===(t=i.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start"}));var o=q(),l=r.a.useState(!1),d=Object(s.a)(l,2),u=d[0],p=d[1],j=function(){p(!u)};return Object(P.jsxs)(R.a,{elevation:6,children:[Object(P.jsx)(L.a,{style:{height:350},image:ne(a),title:a.name}),Object(P.jsxs)(z.a,{children:[Object(P.jsx)(C.a,{gutterBottom:!0,variant:"h5",children:a.name}),Object(P.jsxs)(H.a,{display:"flex",justifyContent:"space-between",my:2,children:[Object(P.jsx)($.a,{name:"read-only",value:Number(a.gmap.rating),readOnly:!0}),Object(P.jsxs)(C.a,{component:"legend",children:[a.gmap.user_ratings_total," review",a.gmap.user_ratings_total>1&&"s"]})]}),Object(P.jsx)(C.a,{component:"legend",children:ae(a)}),Object(P.jsxs)(W.a,{disableSpacing:!0,children:[Object(P.jsx)(C.a,{variant:"subtitle2",color:"textSecondary",children:"See all times"}),Object(P.jsx)(Z.a,{className:Object(Y.a)(o.expand,Object(N.a)({},o.expandOpen,u)),onClick:j,"aria-expanded":u,"aria-label":"show more",children:Object(P.jsx)(X.a,{})})]}),Object(P.jsx)(J.a,{in:u,timeout:"auto",unmountOnExit:!0,children:a.times.map((function(e){return Object(P.jsx)(H.a,{display:"flex",justifyContent:"space-between",my:1,alignItems:"center",children:Object(P.jsxs)(C.a,{variant:"subtitle2",color:"textSecondary",children:[(t=e.day,t.charAt(0).toUpperCase()+t.slice(1)),": ",e.start_time,"-",e.end_time]})});var t}))}),Object(P.jsx)(H.a,{display:"flex",justifyContent:"space-between",children:void 0!==a.gmap.price_level&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(C.a,{component:"legend",children:"Price"}),Object(P.jsx)(C.a,{gutterBottom:!0,variant:"subtitle1",children:"$".repeat(a.gmap.price_level+1)})]})}),a.deals.slice(0,5).map((function(e){return Object(P.jsx)(H.a,{display:"flex",justifyContent:"space-between",my:1,alignItems:"center",children:Object(P.jsxs)(C.a,{variant:"subtitle2",color:"textSecondary",children:[x(e.price)&&"$",e.price," ",e.item]})})})),a.deals.length>5&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(W.a,{disableSpacing:!0,children:[Object(P.jsxs)(C.a,{variant:"subtitle2",color:"textSecondary",children:["+ ",a.deals.length-5," more!"]}),Object(P.jsx)(Z.a,{className:Object(Y.a)(o.expand,Object(N.a)({},o.expandOpen,u)),onClick:j,"aria-expanded":u,"aria-label":"show more",children:Object(P.jsx)(X.a,{})})]}),Object(P.jsx)(J.a,{in:u,timeout:"auto",unmountOnExit:!0,children:a.deals.slice(5).map((function(e){return Object(P.jsx)(H.a,{display:"flex",justifyContent:"space-between",my:1,alignItems:"center",children:Object(P.jsxs)(C.a,{variant:"subtitle2",color:"textSecondary",children:[x(e.price)&&"$",e.price,", ",e.item]})})}))})]}),a.dogfriendly&&Object(P.jsx)(G.a,{size:"small",label:"Public Wifi",className:o.chip}),a.wifi&&Object(P.jsx)(G.a,{size:"small",label:"Dog Friendly",className:o.chip}),a.gmap.formatted_address&&Object(P.jsxs)(C.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",className:o.subtitle,children:[Object(P.jsx)(U.a,{}),Object(P.jsx)(_.a,{size:"small",color:"seconday",onClick:function(){return window.open(function(e,t){return"https://www.google.com/maps/dir/".concat(t.lat,",").concat(t.lng,"/").concat(e)}(a.gmap.formatted_address,c),"_blank")},children:a.gmap.formatted_address})]}),a.gmap.formatted_phone&&Object(P.jsxs)(C.a,{variant:"body2",color:"textSecondary",className:o.spacing,children:[Object(P.jsx)(M.a,{})," ",a.gmap.formatted_phone]})]}),Object(P.jsx)(W.a,{children:Object(P.jsx)(_.a,{size:"small",color:"seconday",onClick:function(){return window.open(a.gmap.website,"_blank")},children:"Website"})})]})},ie=Object(S.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,marginBottom:"30px"},selectEmpty:{marginTop:e.spacing(2)},loading:{height:"600px",display:"flex",justifyContent:"center",alignItems:"center"},container:{padding:"25px"},marginBottom:{marginBottom:"30px"},list:{height:"75vh",overflow:"auto"}}})),ce=function(e){var t=e.places,a=e.dogFriendly,r=e.setDogFriendly,i=e.wifi,c=e.setWifi,o=e.happyNow,d=e.setHappyNow,u=e.childClicked,p=e.isLoading,j=e.coords,m=Object(n.useState)([]),b=Object(s.a)(m,2),h=b[0],f=b[1],g=ie();return Object(n.useEffect)((function(){f((function(e){return Array(t.length).fill().map((function(t,a){return e[a]||Object(n.createRef)()}))}))}),[t]),Object(P.jsx)("div",{className:g.container,children:p?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(C.a,{variant:"h4",children:"Loading Happiness \ud83d\ude00"}),Object(P.jsx)("div",{className:g.loading,children:Object(P.jsx)(A.a,{size:"5rem"})})]}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(C.a,{variant:"h4",children:["Found ",t.length," deals nearby"]}),Object(P.jsx)(I.a,{className:g.formControl,children:Object(P.jsxs)(F.a,{row:!0,children:[Object(P.jsx)(D.a,{control:Object(P.jsx)(B.a,{checked:a,onChange:function(e){return r(e.target.checked)},name:"dogFriendly",color:"primary"}),label:"Dog Friendly"}),Object(P.jsx)(D.a,{control:Object(P.jsx)(B.a,{checked:i,onChange:function(e){return c(e.target.checked)},name:"wifi",color:"primary"}),label:"Public Wifi"}),Object(P.jsx)(D.a,{control:Object(P.jsx)(B.a,{checked:o,onChange:function(e){return d(e.target.checked)},name:"happyNow",color:"primary"}),label:"Happyning Now"})]})}),Object(P.jsx)(l.a,{container:!0,spacing:3,className:g.list,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(P.jsx)(l.a,{ref:h[t],item:!0,xs:12,children:Object(P.jsx)(re,{selected:Number(u)===t,refProp:h[t],place:e,coords:j})},t)}))})]})})},se=a(79),oe=a(148),le=a(81),de=a(77),ue=a.n(de),pe=[{featureType:"all",elementType:"all",stylers:[{saturation:"32"},{lightness:"-3"},{visibility:"on"},{weight:"1.18"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{saturation:"-70"},{lightness:"14"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{saturation:"100"},{lightness:"-14"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"},{lightness:"12"}]}],je=Object(S.a)((function(){return{paper:{padding:"10px",display:"flex",flexDirection:"column",justifyContent:"center",width:"100px"},mapContainer:{height:"85vh",width:"100%"},markerContainer:{position:"absolute",transform:"translate(-50%, -50%)",zIndex:1,"&:hover":{zIndex:2}},pointer:{cursor:"pointer"}}})),me=["sunday","monday","tuesday","wednesday","thursday","friday","saturday","sunday"][(new Date).getDay()],be=function(e){return e.filter((function(e){return e.day===me}))[0]},he=function(e){var t=e.times;return be(t)?"".concat(be(t).start_time,"-").concat(be(t).end_time):"Not Today :("},fe=function(e){var t=e.coords,a=e.places,n=e.setCoords,r=e.setBounds,i=e.setChildClicked,c=Object(oe.a)("(min-width:600px)"),s=je();return Object(P.jsx)("div",{className:s.mapContainer,children:Object(P.jsx)(se.a,{bootstrapURLKeys:{key:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyCxfXAPgVM8ownCZdr8dFbQSg76chB7P4s",REACT_APP_RAPID_API_TRAVEL_API_KEY:"i9fZeDjHQ9mshwxyGc2nw99PboG1p14gXUSjsnfrglvSGlT5Jh"}).REACT_APP_GOOGLE_MAP_API_KEY},defaultCenter:t,center:t,defaultZoom:14,margin:[50,50,50,50],options:{disableDefaultUI:!1,zoomControl:!0,styles:pe},onChange:function(e){n({lat:e.center.lat,lng:e.center.lng}),r({ne:e.marginBounds.ne,sw:e.marginBounds.sw})},onChildClick:function(e){return i(e)},children:a.length&&a.map((function(e,t){return Object(P.jsx)("div",{className:s.markerContainer,lat:Number(e.gmap.geometry.location.lat),lng:Number(e.gmap.geometry.location.lng),children:c?Object(P.jsxs)(le.a,{elevation:3,className:s.paper,children:[Object(P.jsxs)(C.a,{className:s.typography,variant:"subtitle2",gutterBottom:!0,children:[" ",e.name]}),Object(P.jsx)(C.a,{className:s.typography,variant:"subtitle3",gutterBottom:!0,children:he(e)}),Object(P.jsx)(C.a,{variant:"subtitle3",color:"textSecondary",children:e.deals.slice(0,3).map((function(e){return(x(e.price)?"$":"")+e.price+" "+e.item})).join(", ")+"..."})]}):Object(P.jsx)(ue.a,{color:"primary",fontSize:"large"})},t)}))})})};f.a.initialize("G-0JVNW6YKDD");var ge=Object(d.a)({palette:{primary:{main:"#EFC319"},secondary:{main:"#bb94e3"}}}),ye=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),c=Object(s.a)(i,2),d=c[0],p=c[1],j=Object(n.useState)(!1),m=Object(s.a)(j,2),b=m[0],h=m[1],x=Object(n.useState)({}),v=Object(s.a)(x,2),w=v[0],C=v[1],_=Object(n.useState)(null),N=Object(s.a)(_,2),S=(N[0],N[1]),k=Object(n.useState)([]),T=Object(s.a)(k,2),A=T[0],I=T[1],F=Object(n.useState)([]),D=Object(s.a)(F,2),B=D[0],R=D[1],L=Object(n.useState)(null),z=Object(s.a)(L,2),H=z[0],W=z[1],G=Object(n.useState)(!1),K=Object(s.a)(G,2),U=K[0],V=K[1];return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;C({lat:a,lng:n})}))}),[]),Object(n.useEffect)((function(){var e=B.filter((function(e){return!a||e.dogfriendly})).filter((function(e){return!d||Boolean(e.wifi)})).filter((function(e){return!b||function(e){f.a.event({category:"User",action:"Filtered by getHappyNow"});var t=new Date,a=["sunday","monday","tuesday","wednesday","thurday","friday","saturday","sunday"][t.getDay()],n=t.getHours(),r=t.getMinutes(),i=e.times.filter((function(e){return e.day===a}));if(!i||0===i.length)return!1;var c=O(y(i[0].start_time)),s=O(y(i[0].end_time)),o=O("".concat(n,":").concat(r));return o>c&&o<s}(e)}));I(e)}),[a,d,b,B]),Object(n.useEffect)((function(){V(!0),g().then((function(e){e=e.filter((function(e){return e.deals.length>0})),R(e),I(e),r(!1),p(!1),h(!1),V(!1)}))}),[]),Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(u.a,{theme:ge,children:[Object(P.jsx)(o.a,{}),Object(P.jsx)(E,{}),Object(P.jsxs)(l.a,{container:!0,spacing:3,style:{width:"100%"},children:[Object(P.jsx)(l.a,{item:!0,xs:12,md:4,children:Object(P.jsx)(ce,{isLoading:U,childClicked:H,places:A,wifi:d,setWifi:p,dogFriendly:a,setDogFriendly:r,happyNow:b,setHappyNow:h,coords:w})}),Object(P.jsx)(l.a,{item:!0,xs:12,md:8,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(P.jsx)(fe,{setChildClicked:W,setBounds:S,setCoords:C,coords:w,places:A.length?A:B})})]})]})})};c.a.render(Object(P.jsx)(ye,{}),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.db0cfd0b.chunk.js.map